package stringapi;

import java.util.Scanner;

public class Jumin {

	public static void main(String[] args) {
		Scanner keyin = new Scanner(System.in);
		String jumin;
		
		System.out.print("# 주민번호 입력 : ");
		jumin = keyin.next();

		if (jumin.length() != 14) {
			System.out.println("# 잘못된 주민번호입니다. (길이)");
			System.exit(0);
		}
		
		if (jumin.charAt(6) != '-') {
			System.out.println("# 잘못된 주민번호입니다. (-)");
		}
		
		// -를 기준으로 분리한 후, 앞은 다 숫자, 뒤도 다 숫자인지 파악
		String[] num = jumin.split("-");
		if (!(num[0].matches("\\d+") && num[1].matches("\\d+"))) {
			System.out.println("# 잘못된 주민번호입니다. (숫자)");
		}
		
		// 연(substring), 월, 일, 성별(charAt) 추출
		String year, month, day;
		char gender;
		year = jumin.substring(0, 2);
		month = jumin.substring(2, 4);
		day = jumin.substring(5, 7);
		gender = jumin.charAt(7);
		
		// 성별이 1, 2, 3, 4가 아니면 잘못된 주민번호
		if (!(gender == '1' || gender == '2' || gender == '3' || gender == '4')) {
			System.out.println("# 잘못된 주민번호입니다. (성별)");
		}
		
		// 성별이 1,2면 연도 앞에 "19",  3,4면 "20" - concat()
		if (gender == '1' && gender =='2') {
			year = "19"+year;
		}
		else if (gender == '3' && gender == '4') {
			year = "20"+year;
		}
		
		
		// 검증알고리즘 처리 charAt() '1' --> 숫자가 아님, 숫자 1로 변경한 후
		// 알고리즘 통과하면 okay, 아니면 잘못(알고리즘)
		String code = jumin.charAt(13)+"";
		int check, sum=0, code1;
		code1 = Integer.parseInt(code);
		
		check = Integer.parseInt(jumin.charAt(0)+"") * 2;
		sum += check;
		check = Integer.parseInt(jumin.charAt(1)+"") * 3;
		sum += check;
		check = Integer.parseInt(jumin.charAt(2)+"") * 4;
		sum += check;
		check = Integer.parseInt(jumin.charAt(3)+"") * 5;
		sum += check;
		check = Integer.parseInt(jumin.charAt(4)+"") * 6;
		sum += check;
		check = Integer.parseInt(jumin.charAt(5)+"") * 7;
		sum += check;
		check = Integer.parseInt(jumin.charAt(7)+"") * 8;
		sum += check;
		check = Integer.parseInt(jumin.charAt(8)+"") * 9;
		sum += check;
		check = Integer.parseInt(jumin.charAt(9)+"") * 2;
		sum += check;
		check = Integer.parseInt(jumin.charAt(10)+"") * 3;
		sum += check;
		check = Integer.parseInt(jumin.charAt(11)+"") * 4;
		sum += check;
		check = Integer.parseInt(jumin.charAt(12)+"") * 5;
		sum += check;
		
		int left;
		left = 11 - (sum % 11);
		
		if (year.substring(0, 2).equals("19")) {
			if (left != code1) {
				System.out.println("# 잘못된 주민번호입니다. (검증-19)");
			}
		}
		if (year.substring(0, 2).equals("20")) {
			if (left != code1) {
				System.out.println("# 잘못된 주민번호입니다. (검증-20)");
			}
			else if (left >= 10 && left <= 100) {
				if (!(left % 10 == code1)) {
					System.out.println("# 잘못된 주빈번호입니다. (검증-20-1)");
				}
			}
		}
		
		System.out.printf("# 올바른 주민번호입니다.");
	}
	
	
	// 주민번호 전달받아 검증코드 알고리즘 수행
	// 123456-5678901
	private static boolean codeCheck(String id) {
		int total = 0; // 합계
		int temp =0;  // 주민번호 한 개씩 따와 저장할 변수
		int value = 2;
		
		for(int i=0; i<id.length()-1; ++i) {
			if(i == 6) continue;   // '-'를 건너뛰는 로직
			temp = id.charAt(i) - '0';
			total += temp * value;
			value++;
			
			if(value == 10) value = 2;
		}
		
		int position = id.length()-1;
		int check = id.charAt(position) - '0';
		
		int tmp = 11 - (total%11);
		
		if(tmp > 9) tmp = tmp % 10;   // 2000
		
		if (tmp == check) return true;
		
		return false;
	}
	
	
	// 주민번호 전달받아 성별 위치의 값이 1, 2면 1900년도 생으로 3,4 이면 2000년대 생으로
	private static String birthyear(String id) {
		String birth = null;
		char gender = id.charAt(7);
		
		if (gender == '1' || gender == '2') 
			birth = "19".concat(id.substring(0, 2));
		else 
			birth = "20".concat(id.substring(0, 2));
		
		return birth;
	}
	
	
	// 전달받은 주민번호로 1, 3이면 "남자", 2, 4면 "여자" 라는 문자열 반환
	private static String genderCheck(String id){
		if((id.charAt(7) -'0') % 2 == 0) return "여성";
		return "남성";
	}
	
	
	// '-' 위치에 문자열이 올바르게 포함되었는지 체크, 성별 범주가 1-4까지인지
	private static boolean isValid(String id) {
		
		if (id.charAt(6) == '-') return false;
		
		char gender = id.charAt(7);
		if(gender >= '1' && gender <= '4') return true;
		
		return false;
	}
	
	
	// '-' 앞과 뒤에 숫자로만 되어 있는지 체크
	// 191225-1234567
	public static boolean isNumeric(String id) {
		for (int i=0; i<id.length(); ++i) {
			char ch = id.charAt(i);
			if(!(ch >= '0' && ch <='9'))
				return false;
		}
		return true;
	}
}
